\doxysection{components/peripherals/i2c/esp\+\_\+ak8975/include/ak8975.h File Reference}
\hypertarget{ak8975_8h}{}\label{ak8975_8h}\index{components/peripherals/i2c/esp\_ak8975/include/ak8975.h@{components/peripherals/i2c/esp\_ak8975/include/ak8975.h}}
{\ttfamily \#include $<$stdint.\+h$>$}\newline
{\ttfamily \#include $<$stdbool.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+err.\+h$>$}\newline
{\ttfamily \#include $<$driver/i2c\+\_\+master.\+h$>$}\newline
{\ttfamily \#include $<$type\+\_\+utils.\+h$>$}\newline
{\ttfamily \#include "{}ak8975\+\_\+version.\+h"{}}\newline
\doxysubsubsection*{Data Structures}
\begin{DoxyCompactItemize}
\item 
struct \mbox{\hyperlink{structak8975__magnetic__axes__data__s}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+s}}
\begin{DoxyCompactList}\small\item\em AK8975 processed compass axes data structure and axes have a range +/-\/1229 uT. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structak8975__axes__data__s}{ak8975\+\_\+axes\+\_\+data\+\_\+s}}
\begin{DoxyCompactList}\small\item\em AK8975 axes data registers (HX, HZ, HZ) structure. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structak8975__config__s}{ak8975\+\_\+config\+\_\+s}}
\begin{DoxyCompactList}\small\item\em AK8975 configuration structure. \end{DoxyCompactList}\item 
struct \mbox{\hyperlink{structak8975__context__t}{ak8975\+\_\+context\+\_\+t}}
\begin{DoxyCompactList}\small\item\em AK8975 context structure. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define {\bfseries I2\+C\+\_\+\+AK8975\+\_\+\+DEV\+\_\+\+CLK\+\_\+\+SPD}~UINT32\+\_\+C(100000)
\begin{DoxyCompactList}\small\item\em ak8975 I2C default clock frequency (100KHz) \end{DoxyCompactList}\item 
\#define {\bfseries I2\+C\+\_\+\+AK8975\+\_\+\+DEV\+\_\+\+ADDR\+\_\+\+CAD1\+\_\+0\+\_\+\+CAD0\+\_\+0}~UINT8\+\_\+C(0x0c)
\begin{DoxyCompactList}\small\item\em ak8975 I2C address when CAD1 and CAD0 are low \end{DoxyCompactList}\item 
\#define {\bfseries I2\+C\+\_\+\+AK8975\+\_\+\+DEV\+\_\+\+ADDR\+\_\+\+CAD1\+\_\+0\+\_\+\+CAD0\+\_\+1}~UINT8\+\_\+C(0x0d)
\begin{DoxyCompactList}\small\item\em ak8975 I2C address when CAD1 is low and CAD0 is high \end{DoxyCompactList}\item 
\#define {\bfseries I2\+C\+\_\+\+AK8975\+\_\+\+DEV\+\_\+\+ADDR\+\_\+\+CAD1\+\_\+1\+\_\+\+CAD0\+\_\+0}~UINT8\+\_\+C(0x0e)
\begin{DoxyCompactList}\small\item\em ak8975 I2C address when CAD1 is high and CAD0 is low \end{DoxyCompactList}\item 
\#define {\bfseries I2\+C\+\_\+\+AK8975\+\_\+\+DEV\+\_\+\+ADDR\+\_\+\+CAD1\+\_\+1\+\_\+\+CAD0\+\_\+1}~UINT8\+\_\+C(0x0f)
\begin{DoxyCompactList}\small\item\em ak8975 I2C address when CAD1 and CAD0 are high \end{DoxyCompactList}\item 
\#define {\bfseries I2\+C\+\_\+\+XFR\+\_\+\+TIMEOUT\+\_\+\+MS}~(500)
\begin{DoxyCompactList}\small\item\em I2C transaction timeout in milliseconds. \end{DoxyCompactList}\item 
\#define \mbox{\hyperlink{group__drivers_gae5925f3fe9c3bd9a0237e62704f6269c}{I2\+C\+\_\+\+AK8975\+\_\+\+CONFIG\+\_\+\+DEFAULT}}
\begin{DoxyCompactList}\small\item\em Macro that initializes {\ttfamily i2c\+\_\+ak8975\+\_\+config\+\_\+t} to default configuration settings. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Typedefs}
\begin{DoxyCompactItemize}
\item 
typedef enum \mbox{\hyperlink{group__drivers_gaa4cd7940a46bd75fcf1bcf0ddc1254dc}{ak8975\+\_\+operating\+\_\+modes\+\_\+e}} {\bfseries ak8975\+\_\+operating\+\_\+modes\+\_\+t}
\begin{DoxyCompactList}\small\item\em AK8975 operating modes enumerator. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structak8975__magnetic__axes__data__s}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+s}} \mbox{\hyperlink{group__drivers_gae81add8ce1a1a058e64e53db692711b0}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+t}}
\begin{DoxyCompactList}\small\item\em AK8975 processed compass axes data structure and axes have a range +/-\/1229 uT. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structak8975__axes__data__s}{ak8975\+\_\+axes\+\_\+data\+\_\+s}} {\bfseries ak8975\+\_\+axes\+\_\+data\+\_\+t}
\begin{DoxyCompactList}\small\item\em AK8975 axes data registers (HX, HZ, HZ) structure. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structak8975__config__s}{ak8975\+\_\+config\+\_\+s}} {\bfseries ak8975\+\_\+config\+\_\+t}
\begin{DoxyCompactList}\small\item\em AK8975 configuration structure. \end{DoxyCompactList}\item 
typedef struct ak8975\+\_\+context\+\_\+t {\bfseries ak8975\+\_\+context\+\_\+t}
\begin{DoxyCompactList}\small\item\em AK8975 context structure definition. \end{DoxyCompactList}\item 
typedef struct \mbox{\hyperlink{structak8975__context__t}{ak8975\+\_\+context\+\_\+t}} \texorpdfstring{$\ast$}{*} {\bfseries ak8975\+\_\+handle\+\_\+t}
\begin{DoxyCompactList}\small\item\em AK8975 handle structure definition. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Enumerations}
\begin{DoxyCompactItemize}
\item 
enum \mbox{\hyperlink{group__drivers_gaa4cd7940a46bd75fcf1bcf0ddc1254dc}{ak8975\+\_\+operating\+\_\+modes\+\_\+e}} \{ \mbox{\hyperlink{group__drivers_ggaa4cd7940a46bd75fcf1bcf0ddc1254dcab2cea80c8918e054d4d1f352fb322ed1}{AK8975\+\_\+\+OPMODE\+\_\+\+POWER\+\_\+\+DOWN}} = (0b0000)
, \mbox{\hyperlink{group__drivers_ggaa4cd7940a46bd75fcf1bcf0ddc1254dcaa0222614031659a26ca2d501626afdbe}{AK8975\+\_\+\+OPMODE\+\_\+\+SINGLE\+\_\+\+MEAS}} = (0b0001)
, \mbox{\hyperlink{group__drivers_ggaa4cd7940a46bd75fcf1bcf0ddc1254dca64bdb034c5ddd0a9cb61c831503d04de}{AK8975\+\_\+\+OPMODE\+\_\+\+SELF\+\_\+\+TEST}} = (0b1000)
, \mbox{\hyperlink{group__drivers_ggaa4cd7940a46bd75fcf1bcf0ddc1254dcac8468040236abeafcfa7e2afe35dd051}{AK8975\+\_\+\+OPMODE\+\_\+\+FUSE\+\_\+\+ROM}} = (0b1111)
 \}
\begin{DoxyCompactList}\small\item\em AK8975 operating modes enumerator. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
union \mbox{\hyperlink{group__drivers_gad642cb1b7454d7bc92b753b37ccd7111}{\+\_\+\+\_\+attribute\+\_\+\+\_\+}} ((packed)) ahtxx\+\_\+status\+\_\+register\+\_\+u
\begin{DoxyCompactList}\small\item\em AHTXX status register structure definition. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_ga12da599a35eb44da6b902f2f37ebe273}{ak8975\+\_\+get\+\_\+control\+\_\+register}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, ak8975\+\_\+control\+\_\+register\+\_\+t \texorpdfstring{$\ast$}{*}const reg)
\begin{DoxyCompactList}\small\item\em Reads control register from AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_ga2c7d6d034b7d06e9aa2e14b4e6fc6dc0}{ak8975\+\_\+set\+\_\+control\+\_\+register}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, const ak8975\+\_\+control\+\_\+register\+\_\+t reg)
\begin{DoxyCompactList}\small\item\em Writes control register to AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_ga86226c1bfc95f774412f55b140f9c2da}{ak8975\+\_\+get\+\_\+selftest\+\_\+control\+\_\+register}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, ak8975\+\_\+selftest\+\_\+control\+\_\+register\+\_\+t \texorpdfstring{$\ast$}{*}const reg)
\begin{DoxyCompactList}\small\item\em Reads self-\/test control register from AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_ga85a711ea67335e72f5203a76688327ed}{ak8975\+\_\+get\+\_\+status1\+\_\+register}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, ak8975\+\_\+status1\+\_\+register\+\_\+t \texorpdfstring{$\ast$}{*}const reg)
\begin{DoxyCompactList}\small\item\em Reads status 1 register from AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gafa04bd6a6d409f2325a09e52dafd6902}{ak8975\+\_\+get\+\_\+status2\+\_\+register}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, ak8975\+\_\+status2\+\_\+register\+\_\+t \texorpdfstring{$\ast$}{*}const reg)
\begin{DoxyCompactList}\small\item\em Reads status 2 register from AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gab6c812960e8ce3a4063dd229b7e40e1b}{ak8975\+\_\+get\+\_\+asa\+\_\+registers}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, uint8\+\_\+t \texorpdfstring{$\ast$}{*}const asa\+\_\+x\+\_\+reg, uint8\+\_\+t \texorpdfstring{$\ast$}{*}const asa\+\_\+y\+\_\+reg, uint8\+\_\+t \texorpdfstring{$\ast$}{*}const asa\+\_\+z\+\_\+reg)
\begin{DoxyCompactList}\small\item\em Reads ASA (X, Y, Z) registers from AK8975. \end{DoxyCompactList}\item 
float \mbox{\hyperlink{group__drivers_ga6a81614c7f5afe335df5211c8555af9f}{ak8975\+\_\+convert\+\_\+to\+\_\+heading}} (const \mbox{\hyperlink{group__drivers_gae81add8ce1a1a058e64e53db692711b0}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+t}} axes\+\_\+data)
\begin{DoxyCompactList}\small\item\em Converts heading (0-\/359 degrees) from magnetic axes. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gaba674ae4afa135da63a0159abe21077b}{ak8975\+\_\+init}} (i2c\+\_\+master\+\_\+bus\+\_\+handle\+\_\+t master\+\_\+handle, const \mbox{\hyperlink{group__drivers_ga357954982de125a621354044159b20be}{ak8975\+\_\+config\+\_\+t}} \texorpdfstring{$\ast$}{*}ak8975\+\_\+config, \mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}ak8975\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Initializes an AK8975 device onto the I2C master bus. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gad55f2dbf0c7a975cf186f9bc33f37b5c}{ak8975\+\_\+get\+\_\+magnetic\+\_\+axes}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, \mbox{\hyperlink{group__drivers_gae81add8ce1a1a058e64e53db692711b0}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}const axes\+\_\+data)
\begin{DoxyCompactList}\small\item\em Read magnetic measurement from AK8975. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gaeff4649a4193d33e8b0a973621a4bffe}{ak8975\+\_\+selftest}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, \mbox{\hyperlink{group__drivers_gae81add8ce1a1a058e64e53db692711b0}{ak8975\+\_\+magnetic\+\_\+axes\+\_\+data\+\_\+t}} \texorpdfstring{$\ast$}{*}const axes\+\_\+data)
\begin{DoxyCompactList}\small\item\em Self-\/test judgement of AK8975 to check if sensor is working normally. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t {\bfseries ak8975\+\_\+get\+\_\+data\+\_\+status} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, bool \texorpdfstring{$\ast$}{*}const ready)
\item 
esp\+\_\+err\+\_\+t {\bfseries ak8975\+\_\+get\+\_\+error\+\_\+status} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, bool \texorpdfstring{$\ast$}{*}const error)
\item 
esp\+\_\+err\+\_\+t {\bfseries ak8975\+\_\+get\+\_\+overflow\+\_\+status} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle, bool \texorpdfstring{$\ast$}{*}const overflow)
\item 
esp\+\_\+err\+\_\+t {\bfseries ak8975\+\_\+power\+\_\+down} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle)
\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_gaba0f1e560fecb3dc448af0dd816e7ec0}{ak8975\+\_\+remove}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle)
\begin{DoxyCompactList}\small\item\em Removes an AK8975 device from master I2C bus. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__drivers_ga9eddb81530aec426bbe587f7fa10e0d8}{ak8975\+\_\+delete}} (\mbox{\hyperlink{group__drivers_ga0210b1c72185499916196ef2f5d77bc7}{ak8975\+\_\+handle\+\_\+t}} handle)
\begin{DoxyCompactList}\small\item\em Removes an AK8975 device from master bus and frees handle. \end{DoxyCompactList}\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{group__drivers_gaf701a57ffdd3b1821b3fdf4a8b8c73ef}{ak8975\+\_\+get\+\_\+fw\+\_\+version}} (void)
\begin{DoxyCompactList}\small\item\em Converts AK8975 firmware version numbers (major, minor, patch, build) into a string. \end{DoxyCompactList}\item 
int32\+\_\+t \mbox{\hyperlink{group__drivers_gaaffd2f4b5fba4019d501d2473991c4ec}{ak8975\+\_\+get\+\_\+fw\+\_\+version\+\_\+number}} (void)
\begin{DoxyCompactList}\small\item\em Converts AK8975 firmware version numbers (major, minor, patch) into an integer value. \end{DoxyCompactList}\end{DoxyCompactItemize}
\doxysubsubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
{\bfseries ak8975\+\_\+control\+\_\+register\+\_\+t}
\item 
{\bfseries ak8975\+\_\+status1\+\_\+register\+\_\+t}
\item 
{\bfseries ak8975\+\_\+status2\+\_\+register\+\_\+t}
\item 
{\bfseries ak8975\+\_\+selftest\+\_\+control\+\_\+register\+\_\+t}
\end{DoxyCompactItemize}
