\doxysection{components/utilities/esp\+\_\+scalar\+\_\+trend/scalar\+\_\+trend.c File Reference}
\hypertarget{scalar__trend_8c}{}\label{scalar__trend_8c}\index{components/utilities/esp\_scalar\_trend/scalar\_trend.c@{components/utilities/esp\_scalar\_trend/scalar\_trend.c}}
{\ttfamily \#include $<$esp\+\_\+check.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+log.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+types.\+h$>$}\newline
{\ttfamily \#include $<$math.\+h$>$}\newline
{\ttfamily \#include $<$scalar\+\_\+trend.\+h$>$}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{scalar__trend_8c_ac2bb3db0b37c9f45103fd513ca5158fe}{ESP\+\_\+\+ARG\+\_\+\+CHECK}}(VAL)
\item 
\#define \mbox{\hyperlink{scalar__trend_8c_aa7866fa5e4e0ee9b034e9dab6599a9cc}{SQR}}(x)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
const char \texorpdfstring{$\ast$}{*} \mbox{\hyperlink{scalar__trend_8c_a0b324bd1c5a54edd2fc7af10c1afcd4e}{scalar\+\_\+trend\+\_\+code\+\_\+to\+\_\+string}} (const \mbox{\hyperlink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}} code)
\begin{DoxyCompactList}\small\item\em Converts {\ttfamily \doxylink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}} enumerator trend code to string. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{scalar__trend_8c_aa371e0515d1b70d866ce306f1eead839}{scalar\+\_\+trend\+\_\+init}} (const uint16\+\_\+t samples\+\_\+size, \mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}scalar\+\_\+trend\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Initializes a scalar trend handle by size of the 1-\/hr samples to analyze. The size of the samples is calculated from the sampling rate. ~\newline
 As an example, if the sampling rate is once every minute, the size of the samples buffer should be 60 e.\+g., one (1) hour. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{scalar__trend_8c_a7b295a1a8e88e57d5a6ed813e536d97d}{scalar\+\_\+trend\+\_\+analysis}} (\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}} scalar\+\_\+trend\+\_\+handle, const float sample, \mbox{\hyperlink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}} \texorpdfstring{$\ast$}{*}const code)
\begin{DoxyCompactList}\small\item\em Analyzes historical samples and scalar Trend appears after one (1) hour of operation. The trend codes are a forecast of the 3-\/hr change based on the previous 1-\/hour history. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{scalar__trend_8c_a341bf47439655e97ec906a8eaef17b60}{scalar\+\_\+trend\+\_\+reset}} (\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}} scalar\+\_\+trend\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Purges scalar trend samples array and resets samples counter. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{scalar__trend_8c_ab5db8dcb60daf60e2dd4492a368cff2d}{scalar\+\_\+trend\+\_\+delete}} (\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}} scalar\+\_\+trend\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Frees scalar trend handle. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Scalar trend libary

Scalar Trend appears after one (1) hour of operation. The trend codes are a forecast of the 3-\/hr change based on the previous 1-\/hour history.

Copyright (c) 2024 Eric Gionet (\href{mailto:gionet.c.eric@gmail.com}{\texttt{ gionet.\+c.\+eric@gmail.\+com}})

MIT Licensed as described in the file LICENSE

Original sources \href{https://gist.github.com/Paraphraser/c5609f85cc7ee6ecd03ce179fb7f7edb}{\texttt{ https\+://gist.\+github.\+com/\+Paraphraser/c5609f85cc7ee6ecd03ce179fb7f7edb}} \href{https://github.com/oyve/barometer-trend/blob/main/predictions/byPressureTrend.js}{\texttt{ https\+://github.\+com/oyve/barometer-\/trend/blob/main/predictions/by\+Pressure\+Trend.\+js}} 

\doxysubsection{Macro Definition Documentation}
\Hypertarget{scalar__trend_8c_ac2bb3db0b37c9f45103fd513ca5158fe}\index{scalar\_trend.c@{scalar\_trend.c}!ESP\_ARG\_CHECK@{ESP\_ARG\_CHECK}}
\index{ESP\_ARG\_CHECK@{ESP\_ARG\_CHECK}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{ESP\_ARG\_CHECK}{ESP\_ARG\_CHECK}}
{\footnotesize\ttfamily \label{scalar__trend_8c_ac2bb3db0b37c9f45103fd513ca5158fe} 
\#define ESP\+\_\+\+ARG\+\_\+\+CHECK(\begin{DoxyParamCaption}\item[{}]{VAL}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do}\ \{\ \textcolor{keywordflow}{if}\ (!(VAL))\ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;\ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
\Hypertarget{scalar__trend_8c_aa7866fa5e4e0ee9b034e9dab6599a9cc}\index{scalar\_trend.c@{scalar\_trend.c}!SQR@{SQR}}
\index{SQR@{SQR}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{SQR}{SQR}}
{\footnotesize\ttfamily \label{scalar__trend_8c_aa7866fa5e4e0ee9b034e9dab6599a9cc} 
\#define SQR(\begin{DoxyParamCaption}\item[{}]{x}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{((x)\ *\ (x))}

\end{DoxyCode}


\doxysubsection{Function Documentation}
\Hypertarget{scalar__trend_8c_a7b295a1a8e88e57d5a6ed813e536d97d}\index{scalar\_trend.c@{scalar\_trend.c}!scalar\_trend\_analysis@{scalar\_trend\_analysis}}
\index{scalar\_trend\_analysis@{scalar\_trend\_analysis}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{scalar\_trend\_analysis()}{scalar\_trend\_analysis()}}
{\footnotesize\ttfamily \label{scalar__trend_8c_a7b295a1a8e88e57d5a6ed813e536d97d} 
esp\+\_\+err\+\_\+t scalar\+\_\+trend\+\_\+analysis (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}}}]{scalar\+\_\+trend\+\_\+handle}{, }\item[{const float}]{sample}{, }\item[{\mbox{\hyperlink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}} \texorpdfstring{$\ast$}{*}const}]{code}{}\end{DoxyParamCaption})}



Analyzes historical samples and scalar Trend appears after one (1) hour of operation. The trend codes are a forecast of the 3-\/hr change based on the previous 1-\/hour history. 


\begin{DoxyParams}{Parameters}
{\em scalar\+\_\+trend\+\_\+handle} & Scalar trend handle. \\
\hline
{\em sample} & Scalar sample to push onto the samples stack. \\
\hline
{\em code} & Scalar trend code of one (1) hour analysis. Scalar trend code {\ttfamily SCALAR\+\_\+\+TREND\+\_\+\+UNKNOWN} is reported when there is an insufficient number of samples to analyze. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
esp\+\_\+err\+\_\+t ESP\+\_\+\+OK on success. 
\end{DoxyReturn}
\Hypertarget{scalar__trend_8c_a0b324bd1c5a54edd2fc7af10c1afcd4e}\index{scalar\_trend.c@{scalar\_trend.c}!scalar\_trend\_code\_to\_string@{scalar\_trend\_code\_to\_string}}
\index{scalar\_trend\_code\_to\_string@{scalar\_trend\_code\_to\_string}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{scalar\_trend\_code\_to\_string()}{scalar\_trend\_code\_to\_string()}}
{\footnotesize\ttfamily \label{scalar__trend_8c_a0b324bd1c5a54edd2fc7af10c1afcd4e} 
const char \texorpdfstring{$\ast$}{*} scalar\+\_\+trend\+\_\+code\+\_\+to\+\_\+string (\begin{DoxyParamCaption}\item[{const \mbox{\hyperlink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}}}]{code}{}\end{DoxyParamCaption})}



Converts {\ttfamily \doxylink{scalar__trend_8h_a0314c0963d877723faaf9ea72b22afc1}{scalar\+\_\+trend\+\_\+codes\+\_\+t}} enumerator trend code to string. 


\begin{DoxyParams}{Parameters}
{\em code} & Scalar trend code to convert to a string. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
const char\texorpdfstring{$\ast$}{*} String representation of the scalar trend code. 
\end{DoxyReturn}
\Hypertarget{scalar__trend_8c_ab5db8dcb60daf60e2dd4492a368cff2d}\index{scalar\_trend.c@{scalar\_trend.c}!scalar\_trend\_delete@{scalar\_trend\_delete}}
\index{scalar\_trend\_delete@{scalar\_trend\_delete}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{scalar\_trend\_delete()}{scalar\_trend\_delete()}}
{\footnotesize\ttfamily \label{scalar__trend_8c_ab5db8dcb60daf60e2dd4492a368cff2d} 
esp\+\_\+err\+\_\+t scalar\+\_\+trend\+\_\+delete (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}}}]{scalar\+\_\+trend\+\_\+handle}{}\end{DoxyParamCaption})}



Frees scalar trend handle. 


\begin{DoxyParams}{Parameters}
{\em scalar\+\_\+trend\+\_\+handle} & Scalar trend handle. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
esp\+\_\+err\+\_\+t ESP\+\_\+\+OK on success. 
\end{DoxyReturn}
\Hypertarget{scalar__trend_8c_aa371e0515d1b70d866ce306f1eead839}\index{scalar\_trend.c@{scalar\_trend.c}!scalar\_trend\_init@{scalar\_trend\_init}}
\index{scalar\_trend\_init@{scalar\_trend\_init}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{scalar\_trend\_init()}{scalar\_trend\_init()}}
{\footnotesize\ttfamily \label{scalar__trend_8c_aa371e0515d1b70d866ce306f1eead839} 
esp\+\_\+err\+\_\+t scalar\+\_\+trend\+\_\+init (\begin{DoxyParamCaption}\item[{const uint16\+\_\+t}]{samples\+\_\+size}{, }\item[{\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}}]{scalar\+\_\+trend\+\_\+handle}{}\end{DoxyParamCaption})}



Initializes a scalar trend handle by size of the 1-\/hr samples to analyze. The size of the samples is calculated from the sampling rate. ~\newline
 As an example, if the sampling rate is once every minute, the size of the samples buffer should be 60 e.\+g., one (1) hour. 


\begin{DoxyParams}{Parameters}
{\em samples\+\_\+size} & Scalar trend samples buffer size. \\
\hline
{\em scalar\+\_\+trend\+\_\+handle} & Scalar trend handle. \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
esp\+\_\+err\+\_\+t ESP\+\_\+\+OK on success. 
\end{DoxyReturn}
\Hypertarget{scalar__trend_8c_a341bf47439655e97ec906a8eaef17b60}\index{scalar\_trend.c@{scalar\_trend.c}!scalar\_trend\_reset@{scalar\_trend\_reset}}
\index{scalar\_trend\_reset@{scalar\_trend\_reset}!scalar\_trend.c@{scalar\_trend.c}}
\doxysubsubsection{\texorpdfstring{scalar\_trend\_reset()}{scalar\_trend\_reset()}}
{\footnotesize\ttfamily \label{scalar__trend_8c_a341bf47439655e97ec906a8eaef17b60} 
esp\+\_\+err\+\_\+t scalar\+\_\+trend\+\_\+reset (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{scalar__trend_8h_acf8da9d0063860556f3774b0259b7b5b}{scalar\+\_\+trend\+\_\+handle\+\_\+t}}}]{scalar\+\_\+trend\+\_\+handle}{}\end{DoxyParamCaption})}



Purges scalar trend samples array and resets samples counter. 


\begin{DoxyParams}{Parameters}
{\em scalar\+\_\+trend\+\_\+handle} & Scalar trend handle \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
esp\+\_\+err\+\_\+t ESP\+\_\+\+OK on success. 
\end{DoxyReturn}
