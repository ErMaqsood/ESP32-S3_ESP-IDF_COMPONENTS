<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<doxygen xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="compound.xsd" version="1.13.2" xml:lang="en-US">
  <compounddef id="dir_f0d7ec722c15201aae35abc6a8797ee6" kind="dir">
    <compoundname>components/storage/esp_datalogger</compoundname>
    <innerdir refid="dir_dbf2d5d942a9a4956579ead161f9c495">components/storage/esp_datalogger/include</innerdir>
    <innerfile refid="datatable_8c">datatable.c</innerfile>
    <briefdescription>
    </briefdescription>
    <detaileddescription>
<para><ulink url="https://github.com/K0I05"><image type="html" name="https://img.shields.io/badge/K0I05-a9a9a9?logo=data:image/svg%2bxml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxODgiIGhlaWdodD0iMTg3Ij48cGF0aCBmaWxsPSIjNDU0QjU0IiBkPSJNMTU1LjU1NSAyMS45M2MxOS4yNzMgMTUuOTggMjkuNDcyIDM5LjM0NSAzMi4xNjggNjMuNzg5IDEuOTM3IDIyLjkxOC00LjU1MyA0Ni42Ni0xOC44NDggNjQuNzgxQTUwOS40NzggNTA5LjQ3OCAwIDAgMSAxNjUgMTU1bC0xLjQ4NCAxLjg4M2MtMTMuMTk2IDE2LjUzMS0zNS41NTUgMjcuMjE1LTU2LjMzOSAyOS45MDItMjguMzEyIDIuOC01Mi4yNTUtNC43MzctNzQuNzMyLTIxLjcxNUMxMy4xNzIgMTQ5LjA5IDIuOTczIDEyNS43MjUuMjc3IDEwMS4yODEtMS42NiA3OC4zNjMgNC44MyA1NC42MjEgMTkuMTI1IDM2LjVBNTA5LjQ3OCA1MDkuNDc4IDAgMCAxIDIzIDMybDEuNDg0LTEuODgzQzM3LjY4IDEzLjU4NiA2MC4wNCAyLjkwMiA4MC44MjMuMjE1YzI4LjMxMi0yLjggNTIuMjU1IDQuNzM3IDc0LjczMiAyMS43MTVaIi8+PHBhdGggZmlsbD0iI0ZERkRGRCIgZD0iTTExOS44NjcgNDUuMjdDMTI4LjkzMiA1Mi4yNiAxMzMuODIgNjMgMTM2IDc0Yy42MyA0Ljk3Mi44NDIgOS45NTMuOTUzIDE0Ljk2LjA0NCAxLjkxMS4xMjIgMy44MjIuMjAzIDUuNzMxLjM0IDEyLjIxLjM0IDEyLjIxLTMuMTU2IDE3LjMwOWE5NS42MDQgOTUuNjA0IDAgMCAxLTQuMTg4IDMuNjI1Yy00LjUgMy43MTctNi45NzQgNy42ODgtOS43MTcgMTIuODAzQzEwNi45NCAxNTIuNzkyIDEwNi45NCAxNTIuNzkyIDk3IDE1N2MtMy40MjMuNTkyLTUuODAxLjY4NS04Ljg3OS0xLjA3NC05LjgyNi03Ljg4LTE2LjAzNi0xOS41OS0yMS44NTgtMzAuNTEyLTIuNTM0LTQuNTc1LTUuMDA2LTcuMjEtOS40NjYtMTAuMDItMy43MTQtMi44ODItNS40NS02Ljk4Ni02Ljc5Ny0xMS4zOTQtLjU1LTQuODg5LS41NjEtOS4zMTYgMS0xNCAuMDkzLTEuNzYzLjE4Mi0zLjUyNy4yMzktNS4yOTIuNDkxLTEzLjg4NCAzLjg2Ni0yNy4wNTcgMTQuMTU2LTM3LjAyOCAxNy4yMTgtMTQuMzM2IDM1Ljg1OC0xNS4wNjYgNTQuNDcyLTIuNDFaIi8+PHBhdGggZmlsbD0iI0M2RDVFMCIgZD0iTTEwOSAzOWMxMS43MDMgNS4yNTUgMTkuMjA2IDEzLjE4NiAyNC4yOTMgMjUuMDA0IDIuODU3IDguMjQgMy40NyAxNi4zMTYgMy42NiAyNC45NTYuMDQ0IDEuOTExLjEyMiAzLjgyMi4yMDMgNS43MzEuMzQgMTIuMjEuMzQgMTIuMjEtMy4xNTYgMTcuMzA5YTk1LjYwNCA5NS42MDQgMCAwIDEtNC4xODggMy42MjVjLTQuNSAzLjcxNy02Ljk3NCA3LjY4OC05LjcxNyAxMi44MDNDMTA2LjgwNCAxNTMuMDQxIDEwNi44MDQgMTUzLjA0MSA5NyAxNTdjLTIuMzMyLjA3OC00LjY2OC4wOS03IDBsMi4xMjUtMS44NzVjNS40My01LjQ0NSA4Ljc0NC0xMi41NzcgMTEuNzU0LTE5LjU1OWEzNDkuNzc1IDM0OS43NzUgMCAwIDEgNC40OTYtOS44NzlsMS42NDgtMy41NWMyLjI0LTMuNTU1IDQuNDEtNC45OTYgNy45NzctNy4xMzcgMi4zMjMtMi42MSAyLjMyMy0yLjYxIDQtNWwtMyAxYy0yLjY4LjE0OC01LjMxOS4yMy04IC4yNWwtMi4xOTUuMDYzYy01LjI4Ny4wMzktNS4yODcuMDM5LTcuNzc4LTEuNjUzLTEuNjY2LTIuNjkyLTEuNDUzLTQuNTYtMS4wMjctNy42NiAyLjM5NS00LjM2MiA0LjkyNC04LjA0IDkuODI4LTkuNTcgMi4zNjQtLjQ2OCA0LjUxNC0uNTI4IDYuOTIyLS40OTNsMi40MjIuMDI4TDEyMSA5MmwtMS0yYTkyLjc1OCA5Mi43NTggMCAwIDEtLjM2LTQuNTg2QzExOC42IDY5LjYzMiAxMTYuNTE3IDU2LjA5NCAxMDQgNDVjLTUuOTA0LTQuNjY0LTExLjYtNi4wODgtMTktNyA3LjU5NC00LjI2NCAxNi4yMjMtMS44MSAyNCAxWiIvPjxwYXRoIGZpbGw9IiM0OTUwNTgiIGQ9Ik03NyA5MmM0LjYxMyAxLjY3MSA3LjI2IDMuOTQ1IDEwLjA2MyA3LjkzOCAxLjA3OCAzLjUyMy45NzYgNS41NDYtLjA2MyA5LjA2Mi0yLjk4NCAyLjk4NC02LjI1NiAyLjM2OC0xMC4yNSAyLjM3NWwtMi4yNzcuMDc0Yy01LjI5OC4wMjgtOC4yNTQtLjk4My0xMi40NzMtNC40NDktMi44MjYtMy41OTctMi40MTYtNy42MzQtMi0xMiA0LjUwMi00LjcyOCAxMC45OS0zLjc2IDE3LTNaIi8+PHBhdGggZmlsbD0iIzQ4NEY1NyIgZD0ibTExOCA5MS43NSAzLjEyNS0uMDc4YzMuMjU0LjM3MSA0LjU5NyAxLjAwMiA2Ljg3NSAzLjMyOC42MzkgNC4yMzEuMjkgNi40NDItMS42ODggMTAuMjUtMy40MjggNC4wNzgtNS44MjcgNS41OTgtMTEuMTk1IDYuMTQ4LTEuNDE0LjAwOC0yLjgyOCAwLTQuMjQyLS4wMjNsLTIuMTY4LjAzNWMtMi45OTgtLjAxNy01LjE1Ny0uMDMzLTcuNjcyLTEuNzU4LTEuNjgxLTIuNjg0LTEuNDYtNC41NTItMS4wMzUtNy42NTIgMi4zNzUtNC4zMjUgNC44OTQtOC4wMDkgOS43NS05LjU1OSAyLjc3Ny0uNTQ0IDUuNDItLjY0OSA4LjI1LS42OTFaIi8+PHBhdGggZmlsbD0iIzUyNTg2MCIgZD0iTTg2IDEzNGgxNmwxIDRjLTIgMi0yIDItNS4xODggMi4yNjZMOTQgMTQwLjI1bC0zLjgxMy4wMTZDODcgMTQwIDg3IDE0MCA4NSAxMzhsMS00WiIvPjwvc3ZnPg==" alt="K0I05" inline="yes"></image>
</ulink> <ulink url="/LICENSE"><image type="html" name="https://cdn.prod.website-files.com/5e0f1144930a8bc8aace526c/65dd9eb5aaca434fac4f1c34_License-MIT-blue.svg" alt="License: MIT" inline="yes"></image>
</ulink> <ulink url="https://en.wikipedia.org/wiki/C_(programming_language)"><image type="html" name="https://img.shields.io/badge/Language-C-navy.svg" alt="Language" inline="yes"></image>
</ulink> <ulink url="https://docs.espressif.com/projects/esp-idf/en/stable/esp32/index.html"><image type="html" name="https://img.shields.io/badge/Framework-ESP_IDF-red.svg" alt="Framework" inline="yes"></image>
</ulink> <ulink url="https://code.visualstudio.com/"><image type="html" name="https://badgen.net/badge/icon/VS%20Code?icon=visualstudio&amp;label=edited%20with" alt="Edited with VS Code" inline="yes"></image>
</ulink> <ulink url="https://platformio.org/"><image type="html" name="https://img.shields.io/badge/build%20with-PlatformIO-orange?logo=data%3Aimage%2Fsvg%2Bxml%3Bbase64%2CPHN2ZyB3aWR0aD0iMjUwMCIgaGVpZ2h0PSIyNTAwIiB2aWV3Qm94PSIwIDAgMjU2IDI1NiIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIiBwcmVzZXJ2ZUFzcGVjdFJhdGlvPSJ4TWlkWU1pZCI+PHBhdGggZD0iTTEyOCAwQzkzLjgxIDAgNjEuNjY2IDEzLjMxNCAzNy40OSAzNy40OSAxMy4zMTQgNjEuNjY2IDAgOTMuODEgMCAxMjhjMCAzNC4xOSAxMy4zMTQgNjYuMzM0IDM3LjQ5IDkwLjUxQzYxLjY2NiAyNDIuNjg2IDkzLjgxIDI1NiAxMjggMjU2YzM0LjE5IDAgNjYuMzM0LTEzLjMxNCA5MC41MS0zNy40OUMyNDIuNjg2IDE5NC4zMzQgMjU2IDE2Mi4xOSAyNTYgMTI4YzAtMzQuMTktMTMuMzE0LTY2LjMzNC0zNy40OS05MC41MUMxOTQuMzM0IDEzLjMxNCAxNjIuMTkgMCAxMjggMCIgZmlsbD0iI0ZGN0YwMCIvPjxwYXRoIGQ9Ik0yNDkuMzg2IDEyOGMwIDY3LjA0LTU0LjM0NyAxMjEuMzg2LTEyMS4zODYgMTIxLjM4NkM2MC45NiAyNDkuMzg2IDYuNjEzIDE5NS4wNCA2LjYxMyAxMjggNi42MTMgNjAuOTYgNjAuOTYgNi42MTQgMTI4IDYuNjE0YzY3LjA0IDAgMTIxLjM4NiA1NC4zNDYgMTIxLjM4NiAxMjEuMzg2IiBmaWxsPSIjRkZGIi8+PHBhdGggZD0iTTE2MC44NjkgNzQuMDYybDUuMTQ1LTE4LjUzN2M1LjI2NC0uNDcgOS4zOTItNC44ODYgOS4zOTItMTAuMjczIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzJzLTEwLjMyIDQuNjItMTAuMzIgMTAuMzJjMCAzLjc1NSAyLjAxMyA3LjAzIDUuMDEgOC44MzdsLTUuMDUgMTguMTk1Yy0xNC40MzctMy42Ny0yNi42MjUtMy4zOS0yNi42MjUtMy4zOWwtMi4yNTggMS4wMXYxNDAuODcybDIuMjU4Ljc1M2MxMy42MTQgMCA3My4xNzctNDEuMTMzIDczLjMyMy04NS4yNyAwLTMxLjYyNC0yMS4wMjMtNDUuODI1LTQwLjU1NS01Mi4xOTd6TTE0Ni41MyAxNjQuOGMtMTEuNjE3LTE4LjU1Ny02LjcwNi02MS43NTEgMjMuNjQzLTY3LjkyNSA4LjMyLTEuMzMzIDE4LjUwOSA0LjEzNCAyMS41MSAxNi4yNzkgNy41ODIgMjUuNzY2LTM3LjAxNSA2MS44NDUtNDUuMTUzIDUxLjY0NnptMTguMjE2LTM5Ljc1MmE5LjM5OSA5LjM5OSAwIDAgMC05LjM5OSA5LjM5OSA5LjM5OSA5LjM5OSAwIDAgMCA5LjQgOS4zOTkgOS4zOTkgOS4zOTkgMCAwIDAgOS4zOTgtOS40IDkuMzk5IDkuMzk5IDAgMCAwLTkuMzk5LTkuMzk4em0yLjgxIDguNjcyYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDkgMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OXoiIGZpbGw9IiNFNTcyMDAiLz48cGF0aCBkPSJNMTAxLjM3MSA3Mi43MDlsLTUuMDIzLTE4LjkwMWMyLjg3NC0xLjgzMiA0Ljc4Ni01LjA0IDQuNzg2LTguNzAxIDAtNS43LTQuNjItMTAuMzItMTAuMzItMTAuMzItNS42OTkgMC0xMC4zMTkgNC42Mi0xMC4zMTkgMTAuMzIgMCA1LjY4MiA0LjU5MiAxMC4yODkgMTAuMjY3IDEwLjMxN0w5NS44IDc0LjM3OGMtMTkuNjA5IDYuNTEtNDAuODg1IDIwLjc0Mi00MC44ODUgNTEuODguNDM2IDQ1LjAxIDU5LjU3MiA4NS4yNjcgNzMuMTg2IDg1LjI2N1Y2OC44OTJzLTEyLjI1Mi0uMDYyLTI2LjcyOSAzLjgxN3ptMTAuMzk1IDkyLjA5Yy04LjEzOCAxMC4yLTUyLjczNS0yNS44OC00NS4xNTQtNTEuNjQ1IDMuMDAyLTEyLjE0NSAxMy4xOS0xNy42MTIgMjEuNTExLTE2LjI4IDMwLjM1IDYuMTc1IDM1LjI2IDQ5LjM2OSAyMy42NDMgNjcuOTI2em0tMTguODItMzkuNDZhOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTkgOS4zOTggOS4zOTkgOS4zOTkgMCAwIDAgOS40IDkuNCA5LjM5OSA5LjM5OSAwIDAgMCA5LjM5OC05LjQgOS4zOTkgOS4zOTkgMCAwIDAtOS4zOTktOS4zOTl6bS0yLjgxIDguNjcxYTIuMzc0IDIuMzc0IDAgMSAxIDAtNC43NDggMi4zNzQgMi4zNzQgMCAwIDEgMCA0Ljc0OHoiIGZpbGw9IiNGRjdGMDAiLz48L3N2Zz4=" alt="Build with PlatformIO" inline="yes"></image>
</ulink> <ulink url="https://registry.platformio.org/libraries/k0i05/esp_datalogger"><image type="html" name="https://badges.registry.platformio.org/packages/k0i05/library/esp_datalogger.svg" alt="PlatformIO Registry" inline="yes"></image>
</ulink> <ulink url="https://components.espressif.com/components/k0i05/esp_datalogger"><image type="html" name="https://components.espressif.com/components/k0i05/esp_datalogger/badge.svg" alt="ESP Component Registry" inline="yes"></image>
</ulink></para>
<para>The ESP data-logger component simplifies in-situ data processing and recording for measurement and control use-cases. The ESP data-logger component integrates with FreeRTOS and synchronizes tasks with the system clock for temporal based task execution with a typical resolution of approximately +/- 50 micro-seconds. If you have applied experience (i.e. systems design, systems integrations, instrumentation, etc.) with commercial measurement and control products for use-cases that require on-board real-time analytics for in-situ processing, then you are most likely familiar with the terms used in the ESP data-logger component and know how it can be applied.</para>
<para>The ESP data-logger component includes the following common helper components:</para>
<para><orderedlist>
<listitem><para><bold>Data-Table</bold>: table based data storage with user-defined columns, scalar and vector data-types, and basic analytics (i.e. average, minimum, and maximum).</para>
</listitem><listitem><para><bold>Time Into Interval</bold>: synchronizes a FreeRTOS task with the system clock with user-defined time interval for temporal conditional scenarios.</para>
</listitem></orderedlist>
</para>
<para>The working example included was developed in Visual Studio Code and requires an internet connection to synchronize the system clock using Simple Network Time Protocol (SNTP) over Wi-Fi. Likewise, you can comment out the Wi-Fi connect and ntp start routines and enable the get and set time routines. The set time routine provides a user configurable date and time structure to initialize the system clock to a base date-time. Otherwise, the included example may not run as expected.</para>
<para><blockquote><para>Please keep in mind that this is still under development but if you have any suggestions or would like to contribute please contact me. </para>
</blockquote></para>
<sect1 id="C:/Users/lavco/OneDrive/Documents/PlatformIO/Projects/ESP32-S3_ESP-IDF_COMPONENTS/components/storage/esp_datalogger/README.md_1autotoc_md114">
<title>Repository</title><para>The component is hosted on github and is located here: <ulink url="https://github.com/K0I05/ESP32-S3_ESP-IDF_COMPONENTS/tree/main/components/storage/esp_datalogger">https://github.com/K0I05/ESP32-S3_ESP-IDF_COMPONENTS/tree/main/components/storage/esp_datalogger</ulink></para>
</sect1>
<sect1 id="C:/Users/lavco/OneDrive/Documents/PlatformIO/Projects/ESP32-S3_ESP-IDF_COMPONENTS/components/storage/esp_datalogger/README.md_1autotoc_md115">
<title>General Usage</title><para>To get started, simply copy the component to your project&apos;s <computeroutput>components</computeroutput> folder and reference the <computeroutput><ref refid="datatable_8h" kindref="compound">datatable.h</ref></computeroutput> header file as an include.</para>
<para><programlisting filename=".text"><codeline><highlight class="normal">components</highlight></codeline>
<codeline><highlight class="normal">└──<sp/>esp_datatable</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>CMakeLists.txt</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>README.md</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>LICENSE</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>idf_component.yml</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>library.json</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>├──<sp/>include</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>│<sp/><sp/><sp/>└──<sp/>datatable_version.h</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>│<sp/><sp/><sp/>└──<sp/>datatable.h</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>└──<sp/>datatable.c</highlight></codeline>
</programlisting></para>
</sect1>
<sect1 id="C:/Users/lavco/OneDrive/Documents/PlatformIO/Projects/ESP32-S3_ESP-IDF_COMPONENTS/components/storage/esp_datalogger/README.md_1autotoc_md116">
<title>Data-Table Example</title><para>Declare the data-table&apos;s handle, data-table configuration, and column indexes for columns that will be added. A data-table will have one task-schedule handle declared for sampling purposes and one time-into-interval handle declared for processing purpose and referenced internally to manage temporal based sampling and processing within the data-table.</para>
<para><programlisting filename=".c"><codeline><highlight class="comment">//<sp/>data-table<sp/>variables<sp/>for<sp/>the<sp/>example</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__drivers_1ga85af77872c8413dc5845585b11a246cc" kindref="member">datatable_handle_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_hdl;<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>example<sp/>data-table<sp/>handle<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/><ref refid="group__drivers_1ga25f6266267983aec4306306da8a7a603" kindref="member">datatable_config_t</ref><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_cfg<sp/>=<sp/>{<sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>example<sp/>data-table<sp/>configuration<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.name<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/></highlight><highlight class="stringliteral">&quot;1min_tbl&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.data_storage_type<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group__drivers_1ggaf718dc8c4c330cd71f59550b5cb469afa0857f605c93e66b2472dc7565d7c2cc5" kindref="member">DATATABLE_DATA_STORAGE_MEMORY_RING</ref>,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.columns_size<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>5,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.rows_size<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>10,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.sampling_config<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_type<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group___free_r_t_o_s_1ggada504a9c0f0f4dfe0f199664315cf03eaebd695763de7ab8ba195c5714c94248b" kindref="member">TIME_INTO_INTERVAL_SEC</ref>,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_period<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>10,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_offset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>},</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>.processing_config<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_type<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group___free_r_t_o_s_1ggada504a9c0f0f4dfe0f199664315cf03ea2c749b9f8d47709452ae742faac5b425" kindref="member">TIME_INTO_INTERVAL_MIN</ref>,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_period<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>1,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_offset<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>=<sp/>0</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal">};</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_pa_avg_col_index;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data-table<sp/>average<sp/>atmospheric<sp/>pressure<sp/>(pa-avg)<sp/>column<sp/>index<sp/>reference<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_ta_avg_col_index;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data-table<sp/>average<sp/>air<sp/>temperature<sp/>(ta-avg)<sp/>column<sp/>index<sp/>reference<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_ta_max_col_index;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data-table<sp/>minimum<sp/>air<sp/>temperature<sp/>(ta-min)<sp/>column<sp/>index<sp/>reference<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_ta_min_col_index;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data-table<sp/>maximum<sp/>air<sp/>temperature<sp/>(ta-max)<sp/>column<sp/>index<sp/>reference<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keyword">static</highlight><highlight class="normal"><sp/>uint8_t<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>dt_1min_td_avg_col_index;<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>data-table<sp/>average<sp/>dew-point<sp/>temperature<sp/>(td-avg)<sp/>column<sp/>index<sp/>reference<sp/>*/</highlight></codeline>
</programlisting></para>
<para>The textual name of the data-table cannot exceed 15-characters, a data-table can have a maximum of 255 columns and a maximum of 65535 rows, size of columns and rows must be larger than 0. The data-table sampling interval must be smaller than the data-table processing interval. For this example, the data-table data storage type is configured to ring memory, first-in-first-out (FIFO), which will pop the oldest record in the data-table for the next record when the data-table becomes full.</para>
<para><blockquote><para>In this case, the data-table sampling task will execute once every 10-seconds with 0-seconds into the interval (i.e. 12:00:00, 12:00:10, 12:00:20, etc.), and the data-table will process samples in the data-table column data buffer once every minute. <linebreak/>
 The example averages, and determines the minimum and maximum, from the samples in data-table column data buffer over a one minute period. The first column added to the data-table will return an index of 2 because the record identifier and timestamp columns are automatically added when the data-table is created. </para>
</blockquote></para>
<para><programlisting filename=".c"><codeline><highlight class="comment">//<sp/>create<sp/>a<sp/>new<sp/>data-table<sp/>handle<sp/>for<sp/>the<sp/>example</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">datatable_new(&amp;dt_1min_cfg,<sp/>&amp;dt_1min_hdl);<sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dt_1min_hdl<sp/>==<sp/>NULL)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>ESP_LOGE(APP_TAG,<sp/></highlight><highlight class="stringliteral">&quot;datatable_new,<sp/>new<sp/>data-table<sp/>handle<sp/>failed&quot;</highlight><highlight class="normal">);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>abort();</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>configure<sp/>data-table<sp/>columns</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>float<sp/>average<sp/>column<sp/>to<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1ga56f0b237df545f1070bfb12143f9877a" kindref="member">datatable_add_float_avg_column</ref>(dt_1min_hdl,<sp/></highlight><highlight class="stringliteral">&quot;Pa_1-Min&quot;</highlight><highlight class="normal">,<sp/>&amp;dt_1min_pa_avg_col_index);<sp/></highlight><highlight class="comment">//<sp/>column<sp/>index<sp/>2</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>float<sp/>average<sp/>column<sp/>to<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1ga56f0b237df545f1070bfb12143f9877a" kindref="member">datatable_add_float_avg_column</ref>(dt_1min_hdl,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min&quot;</highlight><highlight class="normal">,<sp/>&amp;dt_1min_ta_avg_col_index);<sp/></highlight><highlight class="comment">//<sp/>column<sp/>index<sp/>3</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>float<sp/>minimum<sp/>column<sp/>to<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1gad8843f31fdde9c9795d9f77ea53442a4" kindref="member">datatable_add_float_min_column</ref>(dt_1min_hdl,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min&quot;</highlight><highlight class="normal">,<sp/>&amp;dt_1min_ta_min_col_index);<sp/></highlight><highlight class="comment">//<sp/>column<sp/>index<sp/>4</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>float<sp/>maximum<sp/>column<sp/>to<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1ga4ecd3999ab6aa5d0a1a3f960a6533a06" kindref="member">datatable_add_float_max_column</ref>(dt_1min_hdl,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min&quot;</highlight><highlight class="normal">,<sp/>&amp;dt_1min_ta_max_col_index);<sp/></highlight><highlight class="comment">//<sp/>column<sp/>index<sp/>5</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>add<sp/>float<sp/>average<sp/>column<sp/>to<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1ga56f0b237df545f1070bfb12143f9877a" kindref="member">datatable_add_float_avg_column</ref>(dt_1min_hdl,<sp/></highlight><highlight class="stringliteral">&quot;Td_1-Min&quot;</highlight><highlight class="normal">,<sp/>&amp;dt_1min_td_avg_col_index);<sp/></highlight><highlight class="comment">//<sp/>column<sp/>index<sp/>6</highlight></codeline>
</programlisting></para>
<para>The task execution time is accounted for in the data-table sampling task delay sub-routine (<computeroutput>datatable_sampling_task_delay</computeroutput>). If the data-table sampling task duration exceeds the data-table sampling interval, a skipped sampling event will be generated, indicating that data-table was unable to process the samples within the defined sampling interval. This is an indication that the data-table sampling task takes longer to execute then the configured sampling interval and the data-table sampling interval must be increased to avoid skipped samples and/or records.</para>
<para>The final step is to push samples into the data-table&apos;s data buffer stack, process the samples, and store the record. In this example, i.e. 10-second sampling and a 1-min storage interval is configured, a total of 6 samples must be pushed onto the data-table&apos;s buffer stack for a processing period to be valid. Otherwise, the data-table&apos;s data buffer stack is purged, record is skipped, and the next sampling period will restart based on the data-table&apos;s configured processing interval.</para>
<para><programlisting filename=".c"><codeline><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>dt_1min_smp_task(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pvParameters<sp/>)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/>;;<sp/>)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delay<sp/>data-table<sp/>sampling<sp/>task<sp/>until<sp/>sampling<sp/>interval<sp/>has<sp/>elapsed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1gaf7216471d840ddce49979addde5497dd" kindref="member">datatable_sampling_task_delay</ref>(dt_1min_hdl);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>measure<sp/>samples<sp/>from<sp/>sensors<sp/>and<sp/>set<sp/>sensor<sp/>variables<sp/>(pa,<sp/>ta,<sp/>td)<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>push<sp/>samples<sp/>onto<sp/>the<sp/>data<sp/>buffer<sp/>stack<sp/>for<sp/>processing</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_pa_avg_col_index,<sp/>pa_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_avg_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_min_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_max_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_td_avg_col_index,<sp/>td_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>data<sp/>buffer<sp/>stack<sp/>samples<sp/>(i.e.<sp/>data-table&apos;s<sp/>configured<sp/>processing<sp/>interval)</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga7dbd90ddf9ee3cc22e0cccd995744c55" kindref="member">datatable_process_samples</ref>(dt_1min_hdl);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>free<sp/>up<sp/>task<sp/>resources</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>vTaskDelete(<sp/>NULL<sp/>);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>The data-table records can be extracted by row index or the entire data-table can be rendered to json format. <linebreak/>
</para>
<para><programlisting filename=".c"><codeline><highlight class="comment">//<sp/>print<sp/>data-table<sp/>as<sp/>a<sp/>string<sp/>in<sp/>json<sp/>format</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>create<sp/>root<sp/>object<sp/>for<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">cJSON<sp/>*dt_1min_json<sp/>=<sp/>cJSON_CreateObject();</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>convert<sp/>the<sp/>data-table<sp/>to<sp/>json<sp/>object</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><ref refid="group__drivers_1ga73545915b25d01821b94cf0a1a93a171" kindref="member">datatable_to_json</ref>(dt_1min_hdl,<sp/>&amp;dt_1min_json);</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>render<sp/>json<sp/>data-table<sp/>object<sp/>to<sp/>text<sp/>and<sp/>print</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*dt_1min_json_str<sp/>=<sp/>cJSON_Print(dt_1min_json);</highlight></codeline>
<codeline><highlight class="normal">ESP_LOGI(APP_TAG,<sp/></highlight><highlight class="stringliteral">&quot;JSON<sp/>Data-Table:\n%s&quot;</highlight><highlight class="normal">,dt_1min_json_str);</highlight></codeline>
<codeline><highlight class="normal"></highlight><highlight class="comment">//<sp/>free-up<sp/>json<sp/>resources</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal">cJSON_free(dt_1min_json_str);</highlight></codeline>
<codeline><highlight class="normal">cJSON_Delete(dt_1min_json);</highlight></codeline>
</programlisting></para>
<para>Sample data-table in json format:</para>
<para><programlisting filename=".c"><codeline><highlight class="normal">{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;name&quot;</highlight><highlight class="normal">:<sp/></highlight><highlight class="stringliteral">&quot;1min_tbl&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;process-interval&quot;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;minute&quot;</highlight><highlight class="normal">,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;process-period&quot;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/>1,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;columns&quot;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">&quot;Record<sp/>ID&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;TS&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Pa_1-Min_Avg&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min_Avg&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min_Min&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Ta_1-Min_Max&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Hr_1-Min_Avg&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Td_1-Min_Avg&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Wd_1-Min_Avg&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;Ws_1-Min_Avg&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;types&quot;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">&quot;id&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;ts&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;int16&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;float&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;processes&quot;</highlight><highlight class="normal">:<sp/><sp/><sp/><sp/>[</highlight><highlight class="stringliteral">&quot;sample&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;sample&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;minimum&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;maximum&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">,<sp/></highlight><highlight class="stringliteral">&quot;average&quot;</highlight><highlight class="normal">],</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="stringliteral">&quot;rows&quot;</highlight><highlight class="normal">:<sp/>[</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[1,<sp/>61684380120,<sp/>1001.3500366210938,<sp/>22.350000381469727,<sp/>22.340000152587891,<sp/>22.360000610351562,<sp/>51,<sp/>20.350000381469727,<sp/>210,<sp/>1.4500000476837158],<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[2,<sp/>61684380180,<sp/>1001.3533325195312,<sp/>22.35333251953125,<sp/>22.340000152587891,<sp/>22.360000610351562,<sp/>53,<sp/>20.353334426879883,<sp/>210,<sp/>1.4500000476837158],<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[3,<sp/>61684380240,<sp/>1001.3583374023438,<sp/>22.358335494995117,<sp/>22.350000381469727,<sp/>22.3700008392334,<sp/>55,<sp/>20.358333587646484,<sp/>210,<sp/>1.4500000476837158],<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>[4,<sp/>61684380300,<sp/>1001.3417358398438,<sp/>22.341667175292969,<sp/>22.329999923706055,<sp/>22.350000381469727,<sp/>57,<sp/>20.341667175292969,<sp/>210,<sp/>1.4500000476837158]]</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>See data-table component and review documentation on features implemented to date.</para>
</sect1>
<sect1 id="C:/Users/lavco/OneDrive/Documents/PlatformIO/Projects/ESP32-S3_ESP-IDF_COMPONENTS/components/storage/esp_datalogger/README.md_1autotoc_md117">
<title>Time-Into-Interval Example</title><para>Let&apos;s extend the <bold>Data-Table Example</bold>, declare a time-into-interval handle within the data-table sampling task sub-routine, and create a time-into-interval instance. The time-into-interval instance interval is every 5-minutes with 0-minutes into the interval.</para>
<para>The next step is declaring a conditional statement leveraging the <computeroutput>time_into_interval</computeroutput> function. This function returns true when the configured interval condition is valid, otherwise, it returns false. In this example, the time-into-interval function will output the data-table in json format every 5-minutes with a 10-second offset into the interval (i.e. 12:00:10, 12:05:10, 12:10:10, etc.).</para>
<para><programlisting filename=".c"><codeline><highlight class="keyword">static</highlight><highlight class="normal"><sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>dt_1min_smp_task(<sp/></highlight><highlight class="keywordtype">void</highlight><highlight class="normal"><sp/>*pvParameters<sp/>)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___free_r_t_o_s_1gaa862ccd8f6519ec10b85b169d3018023" kindref="member">time_into_interval_handle_t</ref><sp/>dt_1min_tii_5min_hdl;</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><ref refid="group___free_r_t_o_s_1ga6e978e77c6c540b23118c566330e5c98" kindref="member">time_into_interval_config_t</ref><sp/>dt_1min_tii_5min_cfg<sp/>=<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_type<sp/><sp/><sp/><sp/><sp/><sp/>=<sp/><ref refid="group___free_r_t_o_s_1ggada504a9c0f0f4dfe0f199664315cf03eaebd695763de7ab8ba195c5714c94248b" kindref="member">TIME_INTO_INTERVAL_SEC</ref>,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_period<sp/><sp/><sp/><sp/>=<sp/>5<sp/>*<sp/>60,</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>.interval_offset<sp/><sp/><sp/><sp/>=<sp/>10</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>};</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>a<sp/>new<sp/>time-into-interval<sp/>handle<sp/>-<sp/>task<sp/>system<sp/>clock<sp/>synchronization</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>time_into_interval_new(&amp;dt_1min_tii_5min_cfg,<sp/>&amp;dt_1min_tii_5min_hdl);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal"><sp/>(dt_1min_tii_5min_hdl<sp/>==<sp/>NULL)<sp/>ESP_LOGE(APP_TAG,<sp/></highlight><highlight class="stringliteral">&quot;time_into_interval_new,<sp/>new<sp/>time-into-interval<sp/>handle<sp/>failed&quot;</highlight><highlight class="normal">);<sp/></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">for</highlight><highlight class="normal"><sp/>(<sp/>;;<sp/>)<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>delay<sp/>data-table<sp/>sampling<sp/>task<sp/>until<sp/>sampling<sp/>interval<sp/>has<sp/>lapsed<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1gaf7216471d840ddce49979addde5497dd" kindref="member">datatable_sampling_task_delay</ref>(dt_1min_hdl);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>get<sp/>measurement<sp/>samples<sp/>from<sp/>sensors<sp/>and<sp/>set<sp/>sensor<sp/>variables<sp/>(pa<sp/>and<sp/>ta)<sp/><sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>push<sp/>samples<sp/>onto<sp/>the<sp/>data<sp/>buffer<sp/>stack<sp/>for<sp/>processing</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_pa_avg_col_index,<sp/>pa_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_avg_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_min_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_ta_max_col_index,<sp/>ta_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga8766983d0abc8827db4de6c427cac380" kindref="member">datatable_push_float_sample</ref>(dt_1min_hdl,<sp/>dt_1min_td_avg_col_index,<sp/>td_samples[samples_index]);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>process<sp/>data<sp/>buffer<sp/>stack<sp/>samples<sp/>(i.e.<sp/>data-table&apos;s<sp/>configured<sp/>processing<sp/>interval)</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga7dbd90ddf9ee3cc22e0cccd995744c55" kindref="member">datatable_process_samples</ref>(dt_1min_hdl);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">/*<sp/>serialize<sp/>data-table<sp/>and<sp/>output<sp/>in<sp/>json<sp/>format<sp/>every<sp/>5-minutes<sp/>(i.e.<sp/>12:00:00,<sp/>12:05:00,<sp/>12:10:00,<sp/>etc.)<sp/>*/</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordflow">if</highlight><highlight class="normal">(<ref refid="group___free_r_t_o_s_1gad8797044bf62fb81d63b0641eb69d0d0" kindref="member">time_into_interval</ref>(dt_1min_tii_5min_hdl))<sp/>{</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>create<sp/>root<sp/>object<sp/>for<sp/>data-table</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cJSON<sp/>*dt_1min_json<sp/>=<sp/>cJSON_CreateObject();</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>convert<sp/>the<sp/>data-table<sp/>to<sp/>json<sp/>object</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><ref refid="group__drivers_1ga73545915b25d01821b94cf0a1a93a171" kindref="member">datatable_to_json</ref>(dt_1min_hdl,<sp/>&amp;dt_1min_json);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>render<sp/>json<sp/>data-table<sp/>object<sp/>to<sp/>text<sp/>and<sp/>print</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="keywordtype">char</highlight><highlight class="normal"><sp/>*dt_1min_json_str<sp/>=<sp/>cJSON_Print(dt_1min_json);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>ESP_LOGI(APP_TAG,<sp/></highlight><highlight class="stringliteral">&quot;JSON<sp/>Data-Table:\n%s&quot;</highlight><highlight class="normal">,dt_1min_json_str);</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>free-up<sp/>json<sp/>resources</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cJSON_free(dt_1min_json_str);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>cJSON_Delete(dt_1min_json);</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>}</highlight></codeline>
<codeline><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/></highlight><highlight class="comment">//<sp/>free<sp/>up<sp/>task<sp/>resources</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>time_into_interval_del(<sp/>dt_1min_tii_5min_hdl<sp/>);<sp/></highlight><highlight class="comment">//delete<sp/>time-into-interval<sp/>handle</highlight><highlight class="normal"></highlight></codeline>
<codeline><highlight class="normal"><sp/><sp/><sp/><sp/>vTaskDelete(<sp/>NULL<sp/>);</highlight></codeline>
<codeline><highlight class="normal">}</highlight></codeline>
</programlisting></para>
<para>You can declare as many time-into-interval handles as needed, or as memory permits, to sychronize real-time events with the system clock. See time-into-interval component and review documentation on features implemented to date.</para>
<para>Copyright (c) 2024 Eric Gionet (<ulink url="mailto:gionet.c.eric@gmail.com">gionet.c.eric@gmail.com</ulink>) </para>
</sect1>
    </detaileddescription>
    <location file="components/storage/esp_datalogger/"/>
  </compounddef>
</doxygen>
