\doxysection{components/utilities/esp\+\_\+kalman\+\_\+motion/kalman\+\_\+motion.c File Reference}
\hypertarget{kalman__motion_8c}{}\label{kalman__motion_8c}\index{components/utilities/esp\_kalman\_motion/kalman\_motion.c@{components/utilities/esp\_kalman\_motion/kalman\_motion.c}}
{\ttfamily \#include "{}kalman\+\_\+motion.\+h"{}}\newline
{\ttfamily \#include $<$string.\+h$>$}\newline
{\ttfamily \#include $<$stdio.\+h$>$}\newline
{\ttfamily \#include $<$esp\+\_\+check.\+h$>$}\newline
\doxysubsubsection*{Macros}
\begin{DoxyCompactItemize}
\item 
\#define \mbox{\hyperlink{kalman__motion_8c_ac2bb3db0b37c9f45103fd513ca5158fe}{ESP\+\_\+\+ARG\+\_\+\+CHECK}}(VAL)
\end{DoxyCompactItemize}
\doxysubsubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_gab8d6766062e59a3b8ed1847cf492e189}{kalman\+\_\+motion\+\_\+init}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} \texorpdfstring{$\ast$}{*}kalman\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Initializes a kalman motion handle instance to filter data from a gyroscope and/or accelerometer. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga17f69997e76e23b45334e8aaa7ad3b89}{kalman\+\_\+motion\+\_\+get\+\_\+angle}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, const float new\+\_\+angle, const float new\+\_\+rate, const float delta\+\_\+time, float \texorpdfstring{$\ast$}{*}const angle)
\begin{DoxyCompactList}\small\item\em Calculates angle using a Kalman motion filter. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga693e2e87f1863b645f40a6e9a08c6406}{kalman\+\_\+motion\+\_\+set\+\_\+angle}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, const float angle)
\begin{DoxyCompactList}\small\item\em Sets the angle and should be used to set the starting angle. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_gac632184217b2187694694a1503e82961}{kalman\+\_\+motion\+\_\+get\+\_\+rate}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, float \texorpdfstring{$\ast$}{*}const rate)
\begin{DoxyCompactList}\small\item\em Gets the unbiased rate calculated from the rate and the calculated bias. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga5ea44db3e1c4e7567f473af587ebb596}{kalman\+\_\+motion\+\_\+set\+\_\+q\+\_\+angle}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, const float q\+\_\+angle)
\begin{DoxyCompactList}\small\item\em Sets q\+\_\+angle noise variance for the accelerometer. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga2bf5dcacd095bba30f5ff747c300fcef}{kalman\+\_\+motion\+\_\+set\+\_\+q\+\_\+bias}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, const float q\+\_\+bias)
\begin{DoxyCompactList}\small\item\em Sets q\+\_\+bias noise variance for the gyroscope. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga01f2d63cd90e5d9a735eb8dd98e528d0}{kalman\+\_\+motion\+\_\+set\+\_\+r\+\_\+measure}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, const float r\+\_\+measure)
\begin{DoxyCompactList}\small\item\em Sets r\+\_\+measure noise variance for the measurement. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga364fbcba405034b6a97ba098310f0ebf}{kalman\+\_\+motion\+\_\+get\+\_\+q\+\_\+angle}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, float \texorpdfstring{$\ast$}{*}const q\+\_\+angle)
\begin{DoxyCompactList}\small\item\em Gets q\+\_\+angle noise variance for the accelerometer. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga930391f0f7430d9f9deba0a475997d29}{kalman\+\_\+motion\+\_\+get\+\_\+q\+\_\+bias}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, float \texorpdfstring{$\ast$}{*}const q\+\_\+bias)
\begin{DoxyCompactList}\small\item\em Gets q\+\_\+bias noise variance for the gyroscope. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga0a03899fa87e7d564396b03bc38d94b0}{kalman\+\_\+motion\+\_\+get\+\_\+r\+\_\+measure}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle, float \texorpdfstring{$\ast$}{*}const r\+\_\+measure)
\begin{DoxyCompactList}\small\item\em Gets r\+\_\+measure noise variance for the measurement. \end{DoxyCompactList}\item 
esp\+\_\+err\+\_\+t \mbox{\hyperlink{group__math_ga058647dbc284327d7a40a199a5868b31}{kalman\+\_\+motion\+\_\+delete}} (\mbox{\hyperlink{group__math_ga8e6e217383a5bfe4456bf69120c9d385}{kalman\+\_\+motion\+\_\+handle\+\_\+t}} kalman\+\_\+handle)
\begin{DoxyCompactList}\small\item\em Frees Kalman motion handle. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
ESP-\/\+IDF kalman motion filter library

Ported from esp-\/open-\/rtos

Copyright (c) 2024 Eric Gionet (\href{mailto:gionet.c.eric@gmail.com}{\texttt{ gionet.\+c.\+eric@gmail.\+com}})

MIT Licensed as described in the file LICENSE 

\doxysubsection{Macro Definition Documentation}
\Hypertarget{kalman__motion_8c_ac2bb3db0b37c9f45103fd513ca5158fe}\index{kalman\_motion.c@{kalman\_motion.c}!ESP\_ARG\_CHECK@{ESP\_ARG\_CHECK}}
\index{ESP\_ARG\_CHECK@{ESP\_ARG\_CHECK}!kalman\_motion.c@{kalman\_motion.c}}
\doxysubsubsection{\texorpdfstring{ESP\_ARG\_CHECK}{ESP\_ARG\_CHECK}}
{\footnotesize\ttfamily \label{kalman__motion_8c_ac2bb3db0b37c9f45103fd513ca5158fe} 
\#define ESP\+\_\+\+ARG\+\_\+\+CHECK(\begin{DoxyParamCaption}\item[{}]{VAL}{}\end{DoxyParamCaption})}

{\bfseries Value\+:}
\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordflow}{do}\ \{\ \textcolor{keywordflow}{if}\ (!(VAL))\ \textcolor{keywordflow}{return}\ ESP\_ERR\_INVALID\_ARG;\ \}\ \textcolor{keywordflow}{while}\ (0)}

\end{DoxyCode}
